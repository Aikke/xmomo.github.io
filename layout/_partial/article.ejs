<article id="<%= post.layout %>-<%= post.slug %>" class="article article-type-<%= post.layout %>" itemscope itemprop="blogPost">
  <div class="article-meta">
      <% if (post.date){ %>
      <time class="date" title="<%= date(post.date, 'YYYY-MM-DD HH:mm:ss')%>"><%= date(post.date, 'YYYY MMMM DD') %></time>
      <% } %>
      <% if (post.tags && post.tags.length){ %>
      <span class="tag">
        <% post.tags.forEach(function(tag, i){ %>
      <a href="javascript:" class="color<%= tag.name.length % 5 + 1 %>"><%=tag.name%></a>
        <% }) %>
      </span>
      <% } %>
      <% if (post.top){ %>
      <span class="top">置顶</span>
      <%}%>
  </div>
    <% if (post.title){ %>
        <h1 class="article-title"><%= post.title %></h1>
    <% } %>
    <div class="toc-ref">
        <%- partial('_partial/toc-ref') %>
    </div>
    <div class="article-entry" itemprop="articleBody">
      <% if (post.excerpt && index){ %>
        <%- post.excerpt %>
        <% if (theme.excerpt_link){ %>
          <p class="article-more-link">
            <a href="<%- url_for(post.path) %>#more"><%= theme.excerpt_link %></a>
          </p>
        <% } %>
      <% } else { %>
        <%- post.content %>
      <% } %>
    </div>
</article>

<% if (!index && post.comments){ %>
    <% if (theme.duoshuo.on) { %>
        <%- partial('comments/duoshuo', {
            key: post.path,
            title: post.title,
            url: config.url+url_for(post.path),
        }) %>
    <% } else if (theme.youyan.on) { %>
        <%- partial('comments/youyan') %>
    <% } else if (theme.disqus.on) { %>
        <%- partial('comments/disqus', {
            shortname: theme.disqus.shortname
        }) %>
    <% } else if (config.disqus_shortname) { %>
        <%- partial('comments/disqus', {
            shortname: config.disqus_shortname
        }) %>
    <% } %>
<% } %>